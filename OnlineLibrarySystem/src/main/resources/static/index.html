<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Library Manager</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="header">
    <h1>Welcome to the Online Library</h1>
  </div>
  <img class="banner" src="images/image.jpg" alt="Library Banner"> 

  <div class="container">

    <div class="book-form">
      <h2>Add New Book</h2>
      <input type="text" id="title" placeholder="Title">
      <input type="text" id="author" placeholder="Author">
      <button onclick="addBook()">Add Book</button>
    </div>

    <div class="book-list">
      <h2>Books in Library</h2>
      <div class="books-grid" id="booksContainer"></div>
    </div>

  </div>

  <script>
    const apiUrl = '/api/books';

    function fetchBooks() {
      fetch(apiUrl)
        .then(res => res.json())
        .then(books => {
          const container = document.getElementById('booksContainer');
          container.innerHTML = '';
          books.forEach(book => {
            const card = document.createElement('div');
            card.className = 'book-card' + (book.borrowed ? ' borrowed' : '');
            card.innerHTML = `
              <h3>${book.title}</h3>
              <p><strong>Author:</strong> ${book.author}</p>
              <p><strong>Status:</strong> ${book.borrowed ? 'Borrowed' : 'Available'}</p>
              <button onclick="borrowBook(${book.id})">Borrow</button>
              <button onclick="returnBook(${book.id})">Return</button>
              <button onclick="deleteBook(${book.id})">Delete</button>
            `;
            container.appendChild(card);
          });
        });
    }

    function addBook() {
      const title = document.getElementById('title').value;
      const author = document.getElementById('author').value;

      if (!title || !author) {
        alert('Both Title and Author are required');
        return;
      }

      fetch(apiUrl, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ title, author, borrowed: false })
      })
      .then(() => {
        document.getElementById('title').value = '';
        document.getElementById('author').value = '';
        fetchBooks();
      });
    }

    function borrowBook(id) {
      fetch(`${apiUrl}/${id}/borrow`, { method: 'PUT' })
        .then(fetchBooks);
    }

    function returnBook(id) {
      fetch(`${apiUrl}/${id}/return`, { method: 'PUT' })
        .then(fetchBooks);
    }

    function deleteBook(id) {
      if (confirm('Are you sure you want to delete this book?')) {
        fetch(`${apiUrl}/${id}`, { method: 'DELETE' })
          .then(fetchBooks);
      }
    }

    // Load books when page loads
    fetchBooks();
  </script>
</body>
</html>
